<!-- views/partials/header.ejs -->

<nav>
    <div id="site-header" class="nav-wrapper black">
        <a href="<%= nodeServer %>" id="site-logo" class="brand-logo left"><img src="<%= staticServer %>/static/img/small_logo.png" /></a>

        <ul id="slide-out" class="side-nav">
          <% if (user && user.authenticated) { %>
            <li class="user"><span class="user"><%= __('app.header.hi') %> <b><%= user.login %></b>!</span></li>
            <li><a href="<%= nodeServer %>/logout"><i class="material-icons left">power_settings_new</i><%= __('app.header.logout') %></a></li>
          <% } else { %>
            <li><a href="<%= nodeServer %>/login"><i class="material-icons left">perm_identity</i><%= __('app.header.login') %></a></li>
          <% } %>
          <li><a href="http://wiki.vectortowns.com/<%= locale.abbreviation %>" target="_blank"><i class="material-icons left">school</i><%= __('app.header.wiki') %></a></li>
          <li class="divider"></li>
          <% for(var i=0; i<locales.length; i++) { %>
            <% if (locales[i].id === locale.id) { %>
              <li class="grey lighten-2">
            <% } else { %>
              <li>
            <% } %>
              <a href="#!" onclick="changeLocale('<%= locales[i].id %>')">
                <img class="flag" src="<%= staticServer %>/static/img/<%= locales[i].id %>.png" />
                <span class="black-text"><%= locales[i].description %></span>
              </a>
            </li>
          <% } %>
        </ul>

        <ul class="right hide-on-med-and-down">
          <% if (user && user.authenticated) { %>
            <li class="user"><span class="user"><%= __('app.header.hi') %> <b><%= user.login %></b>!</span></li>
            <li><a href="<%= nodeServer %>/logout"><i class="material-icons left">power_settings_new</i><%= __('app.header.logout') %></a></li>
          <% } else { %>
            <li><a href="<%= nodeServer %>/login"><i class="material-icons left">perm_identity</i><%= __('app.header.login') %></a></li>
          <% } %>
          <li><a href="http://wiki.vectortowns.com/<%= locale.abbreviation %>" target="_blank"><i class="material-icons left">school</i><%= __('app.header.wiki') %></a></li>

          <!-- Dropdown Trigger -->
          <li id="li_dropdown_locales">
            <a class='dropdown-button' href='#' data-activates='dropdown_locales'>
              <i class="material-icons left">language</i><%= __('app.header.language') %>
            </a>
          </li>

        </ul>
        <a href="#" data-activates="slide-out" class="button-collapse right"><i class="material-icons">menu</i></a>

    </div>
</nav>

<!-- Dropdown Structure -->
<ul id='dropdown_locales' class='dropdown-content'>
  <% for(var i=0; i<locales.length; i++) { %>
    <% if (locales[i].id === locale.id) { %>
      <li class="grey lighten-2">
    <% } else { %>
      <li>
    <% } %>
      <a href="#!" onclick="changeLocale('<%= locales[i].id %>')">
        <img class="flag" src="<%= staticServer %>/static/img/<%= locales[i].id %>.png" />
        <span class="black-text"><%= locales[i].description %></span>
      </a>
    </li>
  <% } %>
</ul>